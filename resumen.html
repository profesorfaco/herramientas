 <!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Muestra</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: Helvetica, Arial, sans-serif;
      background: #fafafa;
      color: #888;
      padding: 20px;
    }
    
    header {
      margin-bottom: 30px;
      width:min(100%,900px);
      margin:1rem auto;
    }
    
    header > h1 {
      font-size: calc(1.2rem + 1.2vw);
      font-weight: 300;
      margin-bottom: 1rem;
      color:#aaa;
    }
 
    header > h2 {
      font-size: calc(1rem + 1vw);
      font-weight: 300;
      margin: 1rem auto;
    }

    header > p {
      font-size: calc(0.6rem + 0.6vw);
      font-weight: 300;
      margin: 1rem auto 2rem auto;
      line-height: 1.5;
    }


    header > p > em{
      font-weight: 400;
      font-style: normal;
    }


    header > p > a{
      font-weight: 400;
      color:#333;
    }

    header > p > a:hover{
      color:#000;
    }

    .filter-container {
      display: flex;
      justify-content: center;
      margin-bottom: 30px;
    }
    
    select {
      padding: 1rem;
      font-size: 1rem;
      border: 1px solid #ddd;
      border-radius: 4px;
      background: white;
      cursor: pointer;
      width: calc(100%);
      margin-bottom: 1rem;
    }
    
    select:focus {
      outline: none;
      border-color: #333;
    }
    
    .grid {
      display: grid;
      grid-template-columns: repeat(9, 1fr);
      gap: 15px;
      max-width: 1800px;
      margin: 0 auto;
    }
    
    .grid-item {
      background: white;
      border-radius: 4px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      transition: transform 0.2s, box-shadow 0.2s;
      cursor: pointer;
    }
    
    .grid-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    
    .grid-item img {
      width: 100%;
      aspect-ratio: 1;
      object-fit: cover;
      display: block;
    }
    
    .grid-item-info {
      padding: 10px;
    }
    
    .grid-item-course {
      font-size: 0.85rem;
      color: #666;
      line-height: 1.3;
    }
    
    .loading {
      text-align: center;
      padding: 40px;
      color: #999;
    }
    
    .error {
      text-align: center;
      padding: 40px;
      color: #c33;
    }
    
    /* Responsive */
    @media (max-width: 1600px) {
      .grid {
        grid-template-columns: repeat(6, 1fr);
      }
    }
    
    @media (max-width: 1200px) {
      .grid {
        grid-template-columns: repeat(4, 1fr);
      }
    }
    
    @media (max-width: 768px) {
      .grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    @media (max-width: 480px) {
      .grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Muestra de 27 estudiantes y 426 de sus trabajos</h1>
    <h2>La mayor parte del estudiantado de la muestra ingresará, en primer semestre de 2026, al segundo ciclo de formación (donde se ofertan asignaturas específicas de cada mención de la carrera).</h2>
    <p>Se les pide revisar la diferencia entre la <a href="https://miro.com/app/board/uXjVJlMV1Gc=/?share_link_id=978474854699" target="_blank">"interpretación" de asignaturas compartida por la Jefatura de carrera en Miro</a> y los trabajos de <em>Configuración Visual II</em>, <em>Procesos y Prototipos I</em>, y <em>Representación Conceptual</em>…</p>

    <div class="filter-container">
      <select id="courseFilter">
        <option value="all">Todos los trabajos</option>
      </select>
    </div>
  </header>
  
  <div id="gridContainer">
    <div class="loading">Cargando trabajos...</div>
  </div>

  <script>
    const API_URL = 'https://profesorfaco.github.io/herramientas/final.json';
    let allProjects = [];
    let currentFilter = 'all';

    async function loadProjects() {
      try {
        const response = await fetch(API_URL);
        if (!response.ok) throw new Error('Error al cargar los datos');
        
        allProjects = await response.json();
        populateFilters();
        renderGrid();
      } catch (error) {
        document.getElementById('gridContainer').innerHTML = `
          <div class="error">Error al cargar los trabajos. Por favor, intenta nuevamente.</div>
        `;
        console.error('Error:', error);
      }
    }

    function populateFilters() {
      const courses = [...new Set(allProjects.map(p => p.course_code))];
      const select = document.getElementById('courseFilter');
      
      courses.forEach(code => {
        const courseName = allProjects.find(p => p.course_code === code)?.course || code;
        const option = document.createElement('option');
        option.value = code;
        option.textContent = `${courseName}`;
        select.appendChild(option);
      });
      
      select.addEventListener('change', (e) => {
        currentFilter = e.target.value;
        renderGrid();
      });
    }

    function renderGrid() {
      const container = document.getElementById('gridContainer');
      const filtered = currentFilter === 'all' 
        ? allProjects 
        : allProjects.filter(p => p.course_code === currentFilter);
      
      if (filtered.length === 0) {
        container.innerHTML = '<div class="loading">No se encontraron trabajos para este filtro.</div>';
        return;
      }
      
      container.innerHTML = `<div class="grid">${filtered.map(project => `
        <div class="grid-item" onclick="window.open('${project.gallery}', '_blank')">
          <img src="${project.photo}" alt="${project.title}" loading="lazy">
          <div class="grid-item-info">
            <div class="grid-item-course">${project.student}<br/><small>${project.course}: ${project.title} (Prof. ${project.lecturer}) </small></div>
          </div>
        </div>
      `).join('')}</div>`;
    }

    loadProjects();
  </script>
</body>
</html>
